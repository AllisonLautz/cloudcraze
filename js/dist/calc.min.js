function commafy(e){if(isFinite(e)){return e.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}return""}function uncommafy(e){return e.replace(/\D|\./g,"")}function checkThreshold(e){var r=""==e.val()?parseInt(e.attr("placeholder")):e.val();r<parseInt(e.attr("min-threshold"))?(e.css("border","2px solid orange"),e.parent().next().css("opacity",1)):r>parseInt(e.attr("max-threshold"))?(e.css("border","2px solid orange"),e.parent().next().css("opacity",1)):(e.css("border","0"),e.parent().next().css("opacity",0))}function getCookie(e){for(var r=e+"=",t=decodeURIComponent(document.cookie),i=t.split(";"),a=0;a<i.length;a++){for(var o=i[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(r))return o.substring(r.length,o.length)}return""}var app=angular.module("CalcApp",[]);app.controller("CalcController",["$scope","$filter","$window","$timeout",function(e,r,t,i){e.data=[];var a=e.data,o=0,n=0,s=0,d=0;a.totalRevIncrease=0,a.totalMarginIncrease=0,getCookie("calcComplete")?a.id=getCookie("calcComplete"):t.location.href=t.location.origin+"/resources/roi-calculator/",a.email=getCookie("calcEmail"),a.industry=getCookie("calcIndustry")||"other",a.commerce=getCookie("calcCommerce")||"legacy",a.totalRevP=parseInt(getCookie("calcTotalRev"))||4e8,a.digitalRevPercentP=getCookie("calcDigitalRevPercent")?parseInt(getCookie("calcDigitalRevPercent")):20,a.directRevPercentP=parseInt(getCookie("calcDirectRevPercent"))||40,a.insideRevPercentP=parseInt(getCookie("calcInsideRevPercent"))||20,a.partnerRevPercentP=parseInt(getCookie("calcPartnerRevPercent"))||20,a.digitalAOVP=getCookie("calcDigitalAOV")?parseInt(getCookie("calcDigitalAOV")):1e3,a.directAOVP=parseInt(getCookie("calcTraditionalAOV"))||2e3,a.insideAOVP=parseInt(getCookie("calcTraditionalAOV"))||2e3,a.partnerAOVP=parseInt(getCookie("calcTraditionalAOV"))||2e3,e.$watch("[data.industry, data.commerce, data.totalRev]",function(e,r){switch(e[2]=e[2]||a.totalRevP,e[2]<3e8?a.digitalSystemsCost2=45e4:e[2]>75e7?a.digitalSystemsCost2=9e5:a.digitalSystemsCost2=6e5,e[0]){case"consumer":"none"==e[1]?(a.digitalErrorP=0,a.digitalTeamSizeP=2,a.digitalSalaryP=0,a.digitalSystemsCost=0):"legacy"==e[1]?(a.digitalErrorP=2,a.digitalTeamSizeP=5,a.digitalSalaryP=112500,a.digitalSystemsCost=25e4):(a.digitalErrorP=2,a.digitalTeamSizeP=7,a.digitalSalaryP=108e3,a.digitalSystemsCost=2e5),a.directErrorP=7,a.insideErrorP=7,a.partnerErrorP=7,a.directTeamSizeP=250,a.insideTeamSizeP=200,a.directSalaryP=6e4,a.insideSalaryP=45e3,a.digitalIncreaseP=7,a.businessBumpP=3,a.crossSellP=3,a.newProductP=9,a.directSystemsCost=15e4,a.insideSystemsCost=15e4,a.partnerContribution=.1,a.salesEfficiencyGain=.3,a.digitalShift=.5,a.directShift=.3,a.insideShift=0,a.partnerShift=.2;break;case"distribution":"none"==e[1]?(a.digitalErrorP=0,a.digitalTeamSizeP=2,a.digitalSalaryP=0,a.digitalSystemsCost=0):"legacy"==e[1]?(a.digitalErrorP=2,a.digitalTeamSizeP=5,a.digitalSalaryP=112500,a.digitalSystemsCost=25e4):(a.digitalErrorP=2,a.digitalTeamSizeP=7,a.digitalSalaryP=108e3,a.digitalSystemsCost=2e5),a.directErrorP=13,a.insideErrorP=13,a.partnerErrorP=13,a.directTeamSizeP=200,a.insideTeamSizeP=75,a.directSalaryP=6e4,a.insideSalaryP=45e3,a.digitalIncreaseP=10,a.businessBumpP=3,a.crossSellP=3,a.newProductP=9,a.directSystemsCost=15e4,a.insideSystemsCost=15e4,a.partnerContribution=.15,a.salesEfficiencyGain=.5,a.digitalShift=.9,a.directShift=.1,a.insideShift=0,a.partnerShift=0;break;case"healthcare":"none"==e[1]?(a.digitalErrorP=0,a.digitalTeamSizeP=2,a.digitalSalaryP=0,a.digitalSystemsCost=0):"legacy"==e[1]?(a.digitalErrorP=2,a.digitalTeamSizeP=5,a.digitalSalaryP=112500,a.digitalSystemsCost=25e4):(a.digitalErrorP=2,a.digitalTeamSizeP=7,a.digitalSalaryP=108e3,a.digitalSystemsCost=2e5),a.directErrorP=7,a.insideErrorP=7,a.partnerErrorP=7,a.directTeamSizeP=400,a.insideTeamSizeP=50,a.directSalaryP=11e4,a.insideSalaryP=45e3,a.digitalIncreaseP=4,a.businessBumpP=2,a.crossSellP=1,a.newProductP=10,a.directSystemsCost=15e4,a.insideSystemsCost=15e4,a.partnerContribution=.4,a.salesEfficiencyGain=.5,a.digitalShift=.4,a.directShift=.3,a.insideShift=.05,a.partnerShift=.25;break;case"manufacturing":"none"==e[1]?(a.digitalErrorP=0,a.digitalTeamSizeP=2,a.digitalSalaryP=0,a.digitalSystemsCost=0):"legacy"==e[1]?(a.digitalErrorP=2,a.digitalTeamSizeP=5,a.digitalSalaryP=112500,a.digitalSystemsCost=25e4):(a.digitalErrorP=2,a.digitalTeamSizeP=7,a.digitalSalaryP=108e3,a.digitalSystemsCost=2e5),a.directErrorP=10,a.insideErrorP=10,a.partnerErrorP=10,a.directTeamSizeP=100,a.insideTeamSizeP=50,a.directSalaryP=7e4,a.insideSalaryP=45e3,a.digitalIncreaseP=5,a.businessBumpP=1,a.crossSellP=2,a.newProductP=1,a.directSystemsCost=15e4,a.insideSystemsCost=15e4,a.partnerContribution=.2,a.salesEfficiencyGain=.5,a.digitalShift=.55,a.directShift=.4,a.insideShift=.05,a.partnerShift=0;break;case"software":"none"==e[1]?(a.digitalErrorP=0,a.digitalTeamSizeP=2,a.digitalSalaryP=0,a.digitalSystemsCost=0):"legacy"==e[1]?(a.digitalErrorP=2,a.digitalTeamSizeP=5,a.digitalSalaryP=112500,a.digitalSystemsCost=25e4):(a.digitalErrorP=2,a.digitalTeamSizeP=7,a.digitalSalaryP=108e3,a.digitalSystemsCost=2e5),a.directErrorP=4,a.insideErrorP=4,a.partnerErrorP=4,a.directTeamSizeP=50,a.insideTeamSizeP=25,a.directSalaryP=9e4,a.insideSalaryP=45e3,a.digitalIncreaseP=5,a.businessBumpP=3,a.crossSellP=2,a.newProductP=10,a.directSystemsCost=15e4,a.insideSystemsCost=15e4,a.partnerContribution=.3,a.salesEfficiencyGain=.2,a.digitalShift=.45,a.directShift=.5,a.insideShift=0,a.partnerShift=.05;break;case"other":"none"==e[1]?(a.digitalErrorP=0,a.digitalTeamSizeP=2,a.digitalSalaryP=0,a.digitalSystemsCost=0):"legacy"==e[1]?(a.digitalErrorP=2,a.digitalTeamSizeP=5,a.digitalSalaryP=112500,a.digitalSystemsCost=25e4):(a.digitalErrorP=2,a.digitalTeamSizeP=7,a.digitalSalaryP=108e3,a.digitalSystemsCost=2e5),a.directErrorP=8,a.insideErrorP=8,a.partnerErrorP=8,a.directTeamSizeP=50,a.insideTeamSizeP=10,a.directSalaryP=6e4,a.insideSalaryP=45e3,a.digitalIncreaseP=5,a.businessBumpP=2,a.crossSellP=2,a.newProductP=10,a.directSystemsCost=15e4,a.insideSystemsCost=15e4,a.partnerContribution=.2,a.salesEfficiencyGain=.5,a.digitalShift=.5,a.directShift=.3,a.insideShift=.1,a.partnerShift=.1}}),e.$watch("[data.totalRev, data.digitalRevPercent, data.directRevPercent, data.insideRevPercent, data.partnerRevPercent]",function(e,r){e[0]=null===e[0]||void 0===e[0]?a.totalRevP:e[0],e[1]=null===e[1]||void 0===e[1]?a.digitalRevPercentP:e[1],e[2]=null===e[2]||void 0===e[2]?a.directRevPercentP:e[2],e[3]=null===e[3]||void 0===e[3]?a.insideRevPercentP:e[3],e[4]=null===e[4]||void 0===e[4]?a.partnerRevPercentP:e[4],0==e[1]?(a.digitalAOVC=0,a.digitalError=0,a.digitalTeamSize=0,a.digitalSalaryC=0):(a.digitalAOVC=null,a.digitalError=null,a.digitalTeamSize=null,a.digitalSalaryC=null),0==e[2]?(a.directAOVC=0,a.directError=0,a.directTeamSize=0,a.directSalaryC=0):(a.directAOVC=null,a.directError=null,a.directTeamSize=null,a.directSalaryC=null),0==e[3]?(a.insideAOVC=0,a.insideError=0,a.insideTeamSize=0,a.insideSalaryC=0):(a.insideAOVC=null,a.insideError=null,a.insideTeamSize=null,a.insideSalaryC=null),0==e[4]?(a.partnerAOVC=0,a.partnerError=0,a.partnerTeamSize=0,a.partnerSalaryC=0):(a.partnerAOVC=null,a.partnerError=null,a.partnerTeamSize=null,a.partnerSalaryC=null),a.digitalRev=e[0]*(e[1]/100),a.directRev=e[0]*(e[2]/100),a.insideRev=e[0]*(e[3]/100),a.partnerRev=e[0]*(e[4]/100),a.totalPercent=e[1]+e[2]+e[3]+e[4]}),e.$watch("[data.digitalAOV, data.directAOV, data.insideAOV, data.partnerAOV]",function(e,r){e[0]=null===e[0]||void 0===e[0]?a.digitalAOVP:e[0],e[1]=null===e[1]||void 0===e[1]?a.directAOVP:e[1],e[2]=null===e[2]||void 0===e[2]?a.insideAOVP:e[2],e[3]=null===e[3]||void 0===e[3]?a.partnerAOVP:e[3],a.digitalOrders=isFinite(a.digitalRev/e[0])?a.digitalRev/e[0]:0,a.directOrders=isFinite(a.directRev/e[1])?a.directRev/e[1]:0,a.insideOrders=isFinite(a.insideRev/e[2])?a.insideRev/e[2]:0,a.partnerOrders=isFinite(a.partnerRev/e[3])?a.partnerRev/e[3]:0}),e.updateTotals=function(){var e=null===a.totalRev||void 0===a.totalRev?a.totalRevP:a.totalRev,t=null===a.digitalRevPercent||void 0===a.digitalRevPercent?a.digitalRevPercentP:a.digitalRevPercent,i=(null===a.directRevPercent||void 0===a.directRevPercent?a.directRevPercentP:a.directRevPercent,null===a.insideRevPercent||void 0===a.insideRevPercent?a.insideRevPercentP:a.insideRevPercent,null===a.partnerRevPercent||void 0===a.partnerRevPercent?a.partnerRevPercentP:a.partnerRevPercent,null===a.digitalAOV||void 0===a.digitalAOV?a.digitalAOVP:a.digitalAOV),l=null===a.directAOV||void 0===a.directAOV?a.directAOVP:a.directAOV,c=null===a.insideAOV||void 0===a.insideAOV?a.insideAOVP:a.insideAOV,g=null===a.partnerAOV||void 0===a.partnerAOV?a.partnerAOVP:a.partnerAOV,u=null===a.digitalError||void 0===a.digitalError?a.digitalErrorP/100:a.digitalError/100,P=null===a.directError||void 0===a.directError?a.directErrorP/100:a.directError/100,m=null===a.insideError||void 0===a.insideError?a.insideErrorP/100:a.insideError/100,C=null===a.partnerError||void 0===a.partnerError?a.partnerErrorP/100:a.partnerError/100,v=null===a.digitalTeamSize||void 0===a.digitalTeamSize?a.digitalTeamSizeP:a.digitalTeamSize,S=null===a.directTeamSize||void 0===a.directTeamSize?a.directTeamSizeP:a.directTeamSize,p=null===a.insideTeamSize||void 0===a.insideTeamSize?a.insideTeamSizeP:a.insideTeamSize,y=null===a.digitalSalary||void 0===a.digitalSalary?a.digitalSalaryP:a.digitalSalary,E=null===a.directSalary||void 0===a.directSalary?a.directSalaryP:a.directSalary,T=null===a.insideSalary||void 0===a.insideSalary?a.insideSalaryP:a.insideSalary,O=null===a.digitalIncrease||void 0===a.digitalIncrease?a.digitalIncreaseP/100:a.digitalIncrease/100,R=null===a.businessBump||void 0===a.businessBump?a.businessBumpP:a.businessBump,h=null===a.crossSell||void 0===a.crossSell?a.crossSellP:a.crossSell,f=null===a.newProduct||void 0===a.newProduct?a.newProductP:a.newProduct;if(a.digitalAOVIncrease=(R+h+f)/100,a.digitalNumOrderErrors=a.digitalOrders*u,a.directNumOrderErrors=a.directOrders*P,a.insideNumOrderErrors=a.insideOrders*m,a.partnerNumOrderErrors=a.partnerOrders*C,a.digitalTeamCost=v*y,a.directTeamCost=S*E,a.insideTeamCost=p*T,a.digitalTotalTeamCost=a.digitalTeamCost+a.digitalSystemsCost,a.directTotalTeamCost=a.directTeamCost+a.directSystemsCost,a.insideTotalTeamCost=a.insideTeamCost+a.insideSystemsCost,a.totalSystemsCost=a.digitalSystemsCost+a.directSystemsCost+a.insideSystemsCost,a.totalTeamCost=a.digitalTeamCost+a.directTeamCost+a.insideTeamCost,a.digitalCostPerMinute=a.digitalTotalTeamCost/525600,a.directCostPerMinute=a.directTotalTeamCost/124800,a.insideCostPerMinute=a.insideTotalTeamCost/124800,a.digitalCostPerError=a.digitalNumOrderErrors*(20*a.digitalCostPerMinute)/a.digitalNumOrderErrors,a.directCostPerError=a.directNumOrderErrors*(60*a.directCostPerMinute)/a.directNumOrderErrors,a.insideCostPerError=a.insideNumOrderErrors*(60*a.insideCostPerMinute)/a.insideNumOrderErrors,a.partnerCostPerError=a.partnerNumOrderErrors*(60*a.insideCostPerMinute)/a.partnerNumOrderErrors,a.digitalErrorCost=isFinite(a.digitalNumOrderErrors*a.digitalCostPerError)?a.digitalNumOrderErrors*a.digitalCostPerError:0,a.directErrorCost=isFinite(a.directNumOrderErrors*a.directCostPerError)?a.directNumOrderErrors*a.directCostPerError:0,a.insideErrorCost=isFinite(a.insideNumOrderErrors*a.insideCostPerError)?a.insideNumOrderErrors*a.insideCostPerError:0,a.partnerErrorCost=isFinite(a.partnerNumOrderErrors*a.partnerCostPerError)?a.partnerNumOrderErrors*a.partnerCostPerError:0,a.totalErrorCost=a.digitalErrorCost+a.directErrorCost+a.insideErrorCost+a.partnerErrorCost,a.digitalSystemPersonelCost=a.digitalTotalTeamCost,a.directSystemPersonelCost=a.directSystemsCost,a.insideSystemPersonelCost=a.insideSystemsCost,a.digitalCostPerOrder=a.digitalOrders>0?a.digitalSystemPersonelCost/a.digitalOrders:0,a.directCostPerOrder=60*a.directCostPerMinute,a.insideCostPerOrder=30*a.insideCostPerMinute,a.digitalCostToServe=a.digitalOrders*a.digitalCostPerOrder+a.digitalSystemPersonelCost,a.directCostToServe=a.directOrders*a.directCostPerOrder+a.directSystemPersonelCost,a.insideCostToServe=a.insideOrders*a.insideCostPerOrder+a.insideSystemPersonelCost,a.partnerCostToServe=a.partnerContribution*a.partnerRev,a.totalCostToServe=a.digitalCostToServe+a.directCostToServe+a.insideCostToServe+a.partnerCostToServe,a.digitalTotalCost=isFinite(a.digitalCostToServe+a.digitalErrorCost)?a.digitalCostToServe+a.digitalErrorCost:0,a.directTotalCost=isFinite(a.directCostToServe+a.directErrorCost)?a.directCostToServe+a.directErrorCost:0,a.insideTotalCost=isFinite(a.insideCostToServe+a.insideErrorCost)?a.insideCostToServe+a.insideErrorCost:0,a.partnerTotalCost=isFinite(a.partnerCostToServe+a.partnerErrorCost)?a.partnerCostToServe+a.partnerErrorCost:0,a.totalCost=a.digitalTotalCost+a.directTotalCost+a.insideTotalCost+a.partnerTotalCost,a.digitalMargin=a.digitalRev-a.digitalTotalCost,a.directMargin=a.directRev-a.directTotalCost,a.insideMargin=a.insideRev-a.insideTotalCost,a.partnerMargin=a.partnerRev-a.partnerTotalCost,a.totalMargin=e-a.totalCost,a.digitalMarginPercent=a.digitalMargin/a.digitalRev,a.directMarginPercent=a.directMargin/a.directRev,a.insideMarginPercent=a.insideMargin/a.insideRev,a.partnerMarginPercent=a.partnerMargin/a.partnerRev,a.totalMarginPercent=a.totalMargin/e,a.directOrdersShift=a.directOrders*a.directShift,a.insideOrdersShift=a.insideOrders*a.insideShift,a.partnerOrdersShift=a.partnerOrders*a.partnerShift,a.digitalOrders2=a.digitalOrders*(1+O)+(a.directOrdersShift+a.insideOrdersShift+a.partnerOrdersShift),a.directOrders2=a.directOrders-a.directOrdersShift,a.insideOrders2=a.insideOrders-a.insideOrdersShift,a.partnerOrders2=a.partnerOrders-a.partnerOrdersShift,a.directOrdersPercent=a.directOrdersShift/a.digitalOrders2,a.insideOrdersPercent=a.insideOrdersShift/a.digitalOrders2,a.partnerOrdersPercent=a.partnerOrdersShift/a.digitalOrders2,a.digitalOrdersShift=a.digitalOrders2-(a.directOrdersShift+a.insideOrdersShift+a.partnerOrdersShift),a.digitalOrdersPercent=1-(a.directOrdersPercent+a.insideOrdersPercent+a.partnerOrdersPercent),a.directAOV2=l,a.insideAOV2=c,a.partnerAOV2=g,a.digitalAOV2=(a.directOrdersPercent*a.directAOV2+a.insideOrdersPercent*a.insideAOV2+a.partnerOrdersPercent*a.partnerAOV2+a.digitalOrdersPercent*i)*(1+a.digitalAOVIncrease),a.digitalRev2=a.digitalOrders2*a.digitalAOV2,a.directRev2=a.directOrders2*a.directAOV2,a.insideRev2=a.insideOrders2*a.insideAOV2,a.partnerRev2=a.partnerOrders2*a.partnerAOV2,a.totalRev2=a.digitalRev2+a.directRev2+a.insideRev2+a.partnerRev2,a.digitalRevPercent2=a.digitalRev2/a.totalRev2,a.directRevPercent2=a.directRev2/a.totalRev2,a.insideRevPercent2=a.insideRev2/a.totalRev2,a.partnerRevPercent2=a.partnerRev2/a.totalRev2,a.digitalError2=0,a.directError2=a.directShift>0?P/2:P,a.insideError2=a.insideShift>0?m/2:m,a.partnerError2=a.partnerShift>0?C/2:C,a.digitalNumOrderErrors2=0,a.directNumOrderErrors2=a.directOrders2*a.directError2,a.insideNumOrderErrors2=a.insideOrders2*a.insideError2,a.partnerNumOrderErrors2=a.partnerOrders2*a.partnerError2,a.digitalTeamCost2=3*y,a.directTeamCost2=a.directTeamCost2,a.insideTeamCost2=a.insideTeamCost2,a.digitalTotalTeamCost2=a.digitalTeamCost2+a.digitalSystemsCost2,a.directTotalTeamCost2=a.directTotalTeamCost,a.insideTotalTeamCost2=a.insideTotalTeamCost,a.totalSystemsCost2=a.digitalSystemsCost2+a.directSystemsCost+a.insideSystemsCost,a.totalTeamCost2=a.digitalTeamCost2+a.directTeamCost+a.insideTeamCost,a.digitalCostPerMinute2=a.digitalTotalTeamCost2/525600,a.directCostPerMinute2=a.directCostPerMinute,a.insideCostPerMinute2=a.insideCostPerMinute,a.digitalCostPerError2=0,a.directCostPerError2=a.directNumOrderErrors2*(60*a.directCostPerMinute2)/a.directNumOrderErrors2,a.insideCostPerError2=a.insideNumOrderErrors2*(60*a.insideCostPerMinute2)/a.insideNumOrderErrors2,a.partnerCostPerError2=a.partnerNumOrderErrors2*(60*a.insideCostPerMinute2)/a.partnerNumOrderErrors2,a.digitalErrorCost2=0,a.directErrorCost2=isFinite(a.directNumOrderErrors2*a.directCostPerError2)?a.directNumOrderErrors2*a.directCostPerError2:0,a.insideErrorCost2=isFinite(a.insideNumOrderErrors2*a.insideCostPerError2)?a.insideNumOrderErrors2*a.insideCostPerError2:0,a.partnerErrorCost2=isFinite(a.partnerNumOrderErrors2*a.partnerCostPerError2)?a.partnerNumOrderErrors2*a.partnerCostPerError2:0,a.totalErrorCost2=a.digitalErrorCost2+a.directErrorCost2+a.insideErrorCost2+a.partnerErrorCost2,a.digitalSystemPersonelCost2=a.digitalTotalTeamCost2,a.directSystemPersonelCost2=a.directSystemsCost,a.insideSystemPersonelCost2=a.insideSystemsCost,a.digitalCostPerOrder2=a.digitalSystemPersonelCost2/a.digitalOrders2,a.directCostPerOrder2=60*a.directCostPerMinute2,a.insideCostPerOrder2=30*a.insideCostPerMinute2,a.digitalCostToServe2=a.digitalOrders2*a.digitalCostPerOrder2+a.digitalSystemPersonelCost2,a.directCostToServe2=a.directOrders2*a.directCostPerOrder2+a.directSystemPersonelCost2,a.insideCostToServe2=a.insideOrders2*a.insideCostPerOrder2+a.insideSystemPersonelCost2,a.partnerCostToServe2=a.partnerContribution*a.partnerRev2,a.totalCostToServe2=a.digitalCostToServe2+a.directCostToServe2+a.insideCostToServe2+a.partnerCostToServe2,a.digitalTotalCost2=isFinite(a.digitalCostToServe2+a.digitalErrorCost2)?a.digitalCostToServe2+a.digitalErrorCost2:0,a.directTotalCost2=isFinite(a.directCostToServe2+a.directErrorCost2)?a.directCostToServe2+a.directErrorCost2:0,a.insideTotalCost2=isFinite(a.insideCostToServe2+a.insideErrorCost2)?a.insideCostToServe2+a.insideErrorCost2:0,a.partnerTotalCost2=isFinite(a.partnerCostToServe2+a.partnerErrorCost2)?a.partnerCostToServe2+a.partnerErrorCost2:0,a.totalCost2=a.digitalTotalCost2+a.directTotalCost2+a.insideTotalCost2+a.partnerTotalCost2,a.digitalMargin2=a.digitalRev2-a.digitalTotalCost2,a.directMargin2=a.directRev2-a.directTotalCost2,a.insideMargin2=a.insideRev2-a.insideTotalCost2,a.partnerMargin2=a.partnerRev2-a.partnerTotalCost2,a.totalMargin2=a.totalRev2-a.totalCost2,a.digitalMarginPercent2=a.digitalMargin2/a.digitalRev2,a.directMarginPercent2=a.directMargin2/a.directRev2,a.insideMarginPercent2=a.insideMargin2/a.insideRev2,a.partnerMarginPercent2=a.partnerMargin2/a.partnerRev2,a.totalMarginPercent2=a.totalMargin2/a.totalRev2,a.growthRate=(a.totalRev2-e)/e,a.marginImpact=(a.totalMargin2-a.totalMargin)/a.totalMargin,a.marginMinusDigital=0==t?a.digitalRev2-a.digitalRev:i*(1+O)*(1+a.digitalAOVIncrease)*a.digitalOrders-a.digitalTotalCost2,a.breakEvenPoint=a.digitalSystemsCost2/(a.marginMinusDigital-a.digitalMargin),a.breakEvenDay=365*a.breakEvenPoint<0?0:365*a.breakEvenPoint>1095?1095:365*a.breakEvenPoint,a.breakEvenDay=r("number")(a.breakEvenDay,0),a.breakEvenDay>365){for(a.breakEvenYear=Math.floor(a.breakEvenDay/365);a.breakEvenDay>365;)a.breakEvenDay-=365;a.breakEvenLine=a.breakEvenYear+" years and "+a.breakEvenDay+" days"}else a.breakEvenLine=a.breakEvenDay+" days";a.breakEvenRev=e*(1+a.growthRate*a.breakEvenPoint),a.totalRevX=e,a.totalRevY1=a.totalRevX*(1+a.growthRate),a.totalRevY2=a.totalRevY1*(1+a.growthRate),a.totalRevY3=a.totalRevY2*(1+a.growthRate),a.totalRevY4=a.totalRevY3*(1+a.growthRate),a.totalMarginY1=a.totalMargin*(1+a.marginImpact),a.totalMarginY2=a.totalMarginY1*(1+a.marginImpact),a.totalMarginY3=a.totalMarginY2*(1+a.marginImpact),a.totalMarginY4=a.totalMarginY3*(1+a.marginImpact),a.totalRevIncrease=a.totalRev2-e,a.totalCostSavings=a.totalCost-a.totalCost2,a.totalMarginIncrease=a.totalMargin2-a.totalMargin,a.roi=(a.marginMinusDigital-a.digitalSystemPersonelCost2-a.digitalMargin)/a.digitalSystemsCost2*100,n=a.totalRevIncrease,d=a.totalMarginIncrease,new CountUp("revTest",o,n,0,1).start(),new CountUp("marginTest",s,d,0,1).start(),o=a.totalRevIncrease,s=a.totalMarginIncrease},e.drawGraphs=function(){console.log("drawing");var t=google.visualization.arrayToDataTable([["Year","Revenue"],[0,Math.round(a.totalRevX)],[1,Math.round(a.totalRevY1)],[2,Math.round(a.totalRevY2)],[3,Math.round(a.totalRevY3)]]),i=google.visualization.arrayToDataTable([["Channel","Revenue"],["Digital",Math.round(a.digitalRev)],["Direct Sales",Math.round(a.directRev)],["Inside Sales",Math.round(a.insideRev)],["Partner",Math.round(a.partnerRev)]]),o=google.visualization.arrayToDataTable([["Channel","Revenue"],["Digital",Math.round(a.digitalRev2)],["Direct Sales",Math.round(a.directRev2)],["Inside Sales",Math.round(a.insideRev2)],["Partner",Math.round(a.partnerRev2)]]),n=google.visualization.arrayToDataTable([["Costs","Error Cost","Cost to Serve"],["Before Transformation",Math.round(a.totalErrorCost),Math.round(a.totalCostToServe)],["After Transformation",Math.round(a.totalErrorCost2),Math.round(a.totalCostToServe2)]]),s=google.visualization.arrayToDataTable([["Channel","Before",{role:"style"},"After",{role:"style"}],["Digital",Math.round(a.digitalMargin),"color: #cfe6f7",Math.round(a.digitalMargin2),"color: #8cc6ec"],["Direct Sales",Math.round(a.directMargin),"color: #e1f1f1",Math.round(a.directMargin2),"color: #48bab4"],["Inside Sales",Math.round(a.insideMargin),"color: #e1f1f1",Math.round(a.insideMargin2),"color: #48bab4"],["Partner",Math.round(a.partnerMargin),"color: #e1f1f1",Math.round(a.partnerMargin2),"color: #48bab4"]]),d={hAxis:{format:"Year #.#",gridlines:{count:4},minorGridlines:{count:1}},vAxis:{format:"$#,###"},series:{0:{pointSize:0,annotationText:"Break Even"},1:{pointSize:6}},legend:{position:"none"},lineWidth:2,colors:["#036cb6"]},l={pieHole:.75,pieSliceText:"none",colors:["#8cc6ec","#4bb9b4","#badedc","#e1f0ee"],pieSliceBorderColor:"transparent",legend:{position:"none"}},c={pieHole:.7,pieSliceText:"none",colors:["#8cc6ec","#4bb9b4","#badedc","#e1f0ee"],pieSliceBorderColor:"transparent",legend:{position:"none"}},g={isStacked:!0,vAxis:{format:"$#,###"},legend:{position:"none"},colors:["#ffa380","#e2704d"]},u={vAxis:{format:"$#,###",viewWindow:{min:0}},legend:{position:"none"},colors:["#e1f1f1","#48bab4","#cfe6f7","#8cc6ec"]},P=new google.visualization.LineChart(document.getElementById("threeYearChart")),m=new google.visualization.LineChart(document.getElementById("threeYearChart2")),C=new google.visualization.PieChart(document.getElementById("oldRevChart")),v=new google.visualization.PieChart(document.getElementById("newRevChart")),S=new google.visualization.ColumnChart(document.getElementById("costsChart")),p=new google.visualization.ColumnChart(document.getElementById("costsChart2")),y=new google.visualization.ColumnChart(document.getElementById("marginsChart")),E=new google.visualization.ColumnChart(document.getElementById("marginsChart2"));google.visualization.events.addListener(m,"ready",function(){var e=a.breakEvenPoint<0?0:a.breakEvenPoint>3?3:a.breakEvenPoint,r=P.getChartLayoutInterface(),t=r.getChartAreaBoundingBox(),i=P.getContainer().getElementsByTagName("svg")[0],o=r.getXLocation(e),n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",o),n.setAttribute("y1",t.top),n.setAttribute("x2",o),n.setAttribute("y2",t.top+t.height),n.setAttribute("stroke","#e2704d"),n.setAttribute("stroke-width",2),i.appendChild(n),a.threeGraph=m.getImageURI()}),google.visualization.events.addListener(C,"ready",function(){a.oldRevGraph=C.getImageURI()}),google.visualization.events.addListener(v,"ready",function(){a.newRevGraph=v.getImageURI()}),google.visualization.events.addListener(p,"ready",function(){a.costsGraph=p.getImageURI()}),google.visualization.events.addListener(E,"ready",function(){a.marginsGraph=E.getImageURI(),7==a.num&&(console.log("sent"),jQuery.ajax({url:ajaxVar.ajax_url,method:"post",data:{action:"generate_report_2",id:a.id,email:a.email,roi:r("number")(a.roi,0)+"%",breakEven:a.breakEvenLine,industry:a.industry,commerce:a.commerce,totalRev:r("currency")(a.totalRevX,"$",0),totalRev2:r("currency")(a.totalRev2,"$",0),totalRevIncrease:r("currency")(a.totalRevIncrease,"$",0),totalCost:r("currency")(a.totalCost,"$",0),totalCost2:r("currency")(a.totalCost2,"$",0),totalCostSavings:r("currency")(a.totalCostSavings,"$",0),totalCostSavingsPercent:r("number")(a.totalCostSavings/a.totalCost*100,1)+"%",totalMargin:r("currency")(a.totalMargin,"$",0),totalMargin2:r("currency")(a.totalMargin2,"$",0),totalMarginIncrease:r("currency")(a.totalMarginIncrease,"$",0),marginImpact:r("number")(100*a.marginImpact,1)+"%",growthRate:r("number")(100*a.growthRate,1)+"%",digitalRevPercent:r("number")(a.digitalRevPercent||a.digitalRevPercentP,1)+"%",digitalRevPercent2:r("number")(100*a.digitalRevPercent2,1)+"%",directRevPercent:r("number")(a.directRevPercent||a.directRevPercentP,1)+"%",insideRevPercent:r("number")(a.insideRevPercent||a.insideRevPercentP,1)+"%",partnerRevPercent:r("number")(a.partnerRevPercent||a.partnerRevPercentP,1)+"%",digitalAOV:r("currency")(a.digitalAOV||a.digitalAOVP,"$",0),directAOV:r("currency")(a.directAOV||a.directAOVP,"$",0),insideAOV:r("currency")(a.insideAOV||a.insideAOVP,"$",0),partnerAOV:r("currency")(a.partnerAOV||a.partnerAOVP,"$",0),digitalError:(a.digitalError||a.digitalErrorP)+"%",digitalErrorP:a.digitalErrorP+"%",directError:(a.directError||a.directErrorP)+"%",directErrorP:a.directErrorP+"%",insideError:(a.insideError||a.insideErrorP)+"%",insideErrorP:a.insideErrorP+"%",partnerError:(a.partnerError||a.partnerErrorP)+"%",partnerErrorP:a.partnerErrorP+"%",digitalTeamSize:r("number")(a.digitalTeamSize||a.digitalTeamSizeP,0),digitalTeamSizeP:r("number")(a.digitalTeamSizeP,0),directTeamSize:r("number")(a.directTeamSize||a.directTeamSizeP,0),directTeamSizeP:r("number")(a.directTeamSizeP,0),insideTeamSize:r("number")(a.insideTeamSize||a.insideTeamSizeP,0),insideTeamSizeP:r("number")(a.insideTeamSizeP,0),digitalSalary:r("currency")(a.digitalSalary||a.digitalSalaryP,"$",0),digitalSalaryP:r("currency")(a.digitalSalaryP,"$",0),directSalary:r("currency")(a.directSalary||a.directSalaryP,"$",0),directSalaryP:r("currency")(a.directSalaryP,"$",0),insideSalary:r("currency")(a.insideSalary||a.insideSalaryP,"$",0),insideSalaryP:r("currency")(a.insideSalaryP,"$",0),digitalIncrease:(a.digitalIncrease||a.digitalIncreaseP)+"%",digitalIncreaseP:a.digitalIncreaseP+"%",businessBump:(a.businessBump||a.businessBumpP)+"%",businessBumpP:a.businessBumpP+"%",crossSell:(a.crossSell||a.crossSellP)+"%",crossSellP:a.crossSellP+"%",newProduct:(a.newProduct||a.newProductP)+"%",newProductP:a.newProductP+"%",threeGraph:a.threeGraph,oldRevGraph:a.oldRevGraph,newRevGraph:a.newRevGraph,costsGraph:a.costsGraph,marginsGraph:a.marginsGraph},success:function(r){a.url=r,jQuery(".download").removeClass("disabled"),e.$apply()},error:function(e){console.log(e)}}))}),P.draw(t,d),m.draw(t,d),C.draw(i,l),v.draw(o,c),S.draw(n,g),p.draw(n,g),y.draw(s,u),E.draw(s,u),jQuery("#oldRevChart").append('<span class="oldRevLabel">Digital Channel<br />'+Math.round(a.digitalRevPercent||a.digitalRevPercentP)+"%</span>"),jQuery("#newRevChart").append('<span class="newRevLabel">Digital Channel<br />'+Math.round(100*a.digitalRevPercent2)+"%</span>")},google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){7==a.num&&e.drawGraphs()}),e.hashCheck=function(){e.updateTotals(),a.num=location.hash.substring(7)||1,7==a.num&&jQuery(".total, .gray-bg").fadeOut(),jQuery(".slide").fadeOut().promise().done(function(){jQuery("#slide-"+a.num).css("display","flex").hide().fadeIn(),jQuery("html, body").animate({scrollTop:0},"slow",function(){jQuery(".left .slide-section").css({left:"-25px",opacity:"0"}),jQuery("#slide-"+a.num+" .left .slide-section").each(function(e){jQuery(this).animate({opacity:1,left:0})}),jQuery(".total").is(":visible")||7==a.num||jQuery(".total, .gray-bg").css("display","flex").hide().fadeIn(),google.visualization.LineChart&&e.drawGraphs()})});var r;7==a.num?(jQuery(".download").addClass("disabled"),r=100):r=15*(a.num-1)+5,jQuery(".current-progress").css("width",r+"%"),a.num>=2?jQuery("#revenue").addClass("complete"):jQuery("#revenue").removeClass("complete"),a.num>=3?jQuery("#orderValue").addClass("complete"):jQuery("#orderValue").removeClass("complete"),a.num>=4?jQuery("#error").addClass("complete"):jQuery("#error").removeClass("complete"),a.num>=5?jQuery("#team").addClass("complete"):jQuery("#team").removeClass("complete"),a.num>=6?jQuery("#benefits").addClass("complete"):jQuery("#benefits").removeClass("complete"),a.num>=7?jQuery("#results").addClass("complete"):jQuery("#results").removeClass("complete"),jQuery(".progress > div").removeClass("current"),jQuery(".progress > div:nth-child("+(parseInt(a.num)+1)+")").addClass("current"),1==a.num&&ga("send","event","ROI Calculator Progress","Moved to Company Slide","Step 3"),2==a.num&&ga("send","event","ROI Calculator Progress","Moved to Revenue Slide","Step 3"),3==a.num&&ga("send","event","ROI Calculator Progress","Moved to Order Value Slide","Step 4"),4==a.num&&ga("send","event","ROI Calculator Progress","Moved to Error Rates Slide","Step 5"),5==a.num&&ga("send","event","ROI Calculator Progress","Moved to Team Slide","Step 6"),6==a.num&&ga("send","event","ROI Calculator Progress","Moved to Benefits Slide","Step 7"),7==a.num&&ga("send","event","ROI Calculator Progress","Moved to Results Slide","Step 8")},i(function(){e.hashCheck()}),window.onhashchange=function(){e.$apply(),e.hashCheck()}}]),app.directive("commas",function(){return{restrict:"C",link:function(e,r,t){(e.data[t.ngModel.slice(5,-1)]||0==e.data[t.ngModel.slice(5,-1)])&&(e.data[t.ngModel.slice(5)]=commafy(e.data[t.ngModel.slice(5,-1)])),r.on("input",function(){if(""===r[0].value)return e.data[t.ngModel.slice(5,-1)]=void 0,void e.$apply();var i=parseInt(uncommafy(r[0].value));i>t.max?r[0].value=commafy(t.max):i<t.min?r[0].value=commafy(t.min):r[0].value=commafy(i),e.data[t.ngModel.slice(5,-1)]=i,e.$apply()})}}}),jQuery("input[min-threshold]").on("input",function(){checkThreshold(jQuery(this))}),jQuery("#download-top").on("click",function(){ga("send","event","ROI Calculator Progress","Clicked Download Custom ROI Report Top","Step 9")}),jQuery("#download-bottom").on("click",function(){ga("send","event","ROI Calculator Progress","Clicked Download Custom ROI Report Bottom","Step 9")});
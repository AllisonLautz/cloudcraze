function getCookie(e){for(var r=e+"=",t=decodeURIComponent(document.cookie),i=t.split(";"),a=0;a<i.length;a++){for(var o=i[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(r))return o.substring(r.length,o.length)}return""}function commafy(e){if(isFinite(e)){return e.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}return""}function uncommafy(e){return e.replace(/\D|\./g,"")}function periods(){"Calculating"==jQuery(".loading h2").html()?jQuery(".loading h2").html("Calculating."):"Calculating."==jQuery(".loading h2").html()?jQuery(".loading h2").html("Calculating.."):"Calculating.."==jQuery(".loading h2").html()?jQuery(".loading h2").html("Calculating..."):jQuery(".loading h2").html("Calculating")}var app=angular.module("CalcApp",[]);app.controller("SimpleCalcController",["$scope","$filter",function(e,r){e.data=[];var t=e.data;e.$watch("[data.industry, data.commerce, data.totalRev]",function(e,r){switch(e[2]=e[2]||t.totalRevP,e[2]<3e8?t.digitalSystemsCost2=45e4:e[2]>75e7?t.digitalSystemsCost2=9e5:t.digitalSystemsCost2=6e5,"none"==e[1]?(t.digitalRevPercent=0,t.traditionalRevPercent=100,t.digitalAOV=0,t.digitalAOVC=0):(t.digitalRevPercent="",t.traditionalRevPercent="",t.digitalAOV="",t.digitalAOVC=""),e[0]){case"consumer":"none"==e[1]?(t.digitalErrorP=0,t.digitalTeamSizeP=2,t.digitalSalaryP=0,t.digitalSystemsCost=0):"legacy"==e[1]?(t.digitalErrorP=2,t.digitalTeamSizeP=5,t.digitalSalaryP=112500,t.digitalSystemsCost=25e4):(t.digitalErrorP=2,t.digitalTeamSizeP=7,t.digitalSalaryP=108e3,t.digitalSystemsCost=2e5),t.digitalRevPercentP=0,t.directRevPercentP=50,t.insideRevPercentP=0,t.partnerRevPercentP=50,t.directErrorP=7,t.insideErrorP=7,t.partnerErrorP=7,t.directTeamSizeP=250,t.insideTeamSizeP=200,t.directSalaryP=6e4,t.insideSalaryP=45e3,t.digitalIncreaseP=7,t.businessBumpP=3,t.crossSellP=3,t.newProductP=9,t.directSystemsCost=15e4,t.insideSystemsCost=15e4,t.partnerContribution=.1,t.salesEfficiencyGain=.3,t.digitalShift=.5,t.directShift=.3,t.insideShift=0,t.partnerShift=.2;break;case"distribution":"none"==e[1]?(t.digitalErrorP=0,t.digitalTeamSizeP=2,t.digitalSalaryP=0,t.digitalSystemsCost=0):"legacy"==e[1]?(t.digitalErrorP=2,t.digitalTeamSizeP=5,t.digitalSalaryP=112500,t.digitalSystemsCost=25e4):(t.digitalErrorP=2,t.digitalTeamSizeP=7,t.digitalSalaryP=108e3,t.digitalSystemsCost=2e5),t.digitalRevPercentP=30,t.directRevPercentP=60,t.insideRevPercentP=10,t.partnerRevPercentP=0,t.directErrorP=13,t.insideErrorP=13,t.partnerErrorP=13,t.directTeamSizeP=200,t.insideTeamSizeP=75,t.directSalaryP=6e4,t.insideSalaryP=45e3,t.digitalIncreaseP=10,t.businessBumpP=3,t.crossSellP=3,t.newProductP=9,t.directSystemsCost=15e4,t.insideSystemsCost=15e4,t.partnerContribution=.15,t.salesEfficiencyGain=.5,t.digitalShift=.9,t.directShift=.1,t.insideShift=0,t.partnerShift=0;break;case"healthcare":"none"==e[1]?(t.digitalErrorP=0,t.digitalTeamSizeP=2,t.digitalSalaryP=0,t.digitalSystemsCost=0):"legacy"==e[1]?(t.digitalErrorP=2,t.digitalTeamSizeP=5,t.digitalSalaryP=112500,t.digitalSystemsCost=25e4):(t.digitalErrorP=2,t.digitalTeamSizeP=7,t.digitalSalaryP=108e3,t.digitalSystemsCost=2e5),t.digitalRevPercentP=5,t.directRevPercentP=60,t.insideRevPercentP=10,t.partnerRevPercentP=25,t.directErrorP=7,t.insideErrorP=7,t.partnerErrorP=7,t.directTeamSizeP=400,t.insideTeamSizeP=50,t.directSalaryP=11e4,t.insideSalaryP=45e3,t.digitalIncreaseP=4,t.businessBumpP=2,t.crossSellP=1,t.newProductP=10,t.directSystemsCost=15e4,t.insideSystemsCost=15e4,t.partnerContribution=.4,t.salesEfficiencyGain=.5,t.digitalShift=.4,t.directShift=.3,t.insideShift=.05,t.partnerShift=.25;break;case"manufacturing":"none"==e[1]?(t.digitalErrorP=0,t.digitalTeamSizeP=2,t.digitalSalaryP=0,t.digitalSystemsCost=0):"legacy"==e[1]?(t.digitalErrorP=2,t.digitalTeamSizeP=5,t.digitalSalaryP=112500,t.digitalSystemsCost=25e4):(t.digitalErrorP=2,t.digitalTeamSizeP=7,t.digitalSalaryP=108e3,t.digitalSystemsCost=2e5),t.digitalRevPercentP=10,t.directRevPercentP=60,t.insideRevPercentP=20,t.partnerRevPercentP=10,t.directErrorP=10,t.insideErrorP=10,t.partnerErrorP=10,t.directTeamSizeP=100,t.insideTeamSizeP=50,t.directSalaryP=7e4,t.insideSalaryP=45e3,t.digitalIncreaseP=5,t.businessBumpP=1,t.crossSellP=2,t.newProductP=1,t.directSystemsCost=15e4,t.insideSystemsCost=15e4,t.partnerContribution=.2,t.salesEfficiencyGain=.5,t.digitalShift=.55,t.directShift=.4,t.insideShift=.05,t.partnerShift=0;break;case"software":"none"==e[1]?(t.digitalErrorP=0,t.digitalTeamSizeP=2,t.digitalSalaryP=0,t.digitalSystemsCost=0):"legacy"==e[1]?(t.digitalErrorP=2,t.digitalTeamSizeP=5,t.digitalSalaryP=112500,t.digitalSystemsCost=25e4):(t.digitalErrorP=2,t.digitalTeamSizeP=7,t.digitalSalaryP=108e3,t.digitalSystemsCost=2e5),t.digitalRevPercentP=20,t.directRevPercentP=75,t.insideRevPercentP=0,t.partnerRevPercentP=5,t.directErrorP=4,t.insideErrorP=4,t.partnerErrorP=4,t.directTeamSizeP=50,t.insideTeamSizeP=25,t.directSalaryP=9e4,t.insideSalaryP=45e3,t.digitalIncreaseP=5,t.businessBumpP=3,t.crossSellP=2,t.newProductP=10,t.directSystemsCost=15e4,t.insideSystemsCost=15e4,t.partnerContribution=.3,t.salesEfficiencyGain=.2,t.digitalShift=.45,t.directShift=.5,t.insideShift=0,t.partnerShift=.05;break;case"other":"none"==e[1]?(t.digitalErrorP=0,t.digitalTeamSizeP=2,t.digitalSalaryP=0,t.digitalSystemsCost=0):"legacy"==e[1]?(t.digitalErrorP=2,t.digitalTeamSizeP=5,t.digitalSalaryP=112500,t.digitalSystemsCost=25e4):(t.digitalErrorP=2,t.digitalTeamSizeP=7,t.digitalSalaryP=108e3,t.digitalSystemsCost=2e5),t.digitalRevPercentP=10,t.directRevPercentP=50,t.insideRevPercentP=20,t.partnerRevPercentP=20,t.directErrorP=8,t.insideErrorP=8,t.partnerErrorP=8,t.directTeamSizeP=50,t.insideTeamSizeP=10,t.directSalaryP=6e4,t.insideSalaryP=45e3,t.digitalIncreaseP=5,t.businessBumpP=2,t.crossSellP=2,t.newProductP=10,t.directSystemsCost=15e4,t.insideSystemsCost=15e4,t.partnerContribution=.2,t.salesEfficiencyGain=.5,t.digitalShift=.5,t.directShift=.3,t.insideShift=.1,t.partnerShift=.1}}),e.$watch("[data.totalRev, data.digitalRevPercent, data.traditionalRevPercent, data.digitalAOV, data.traditionalAOV]",function(e,r){t.digitalRev=null===e[0]||void 0===e[0]||null===e[1]||void 0===e[1]?0:e[0]*(e[1]/100),t.traditionalRev=null===e[0]||void 0===e[0]||null===e[2]||void 0===e[2]?0:e[0]*(e[2]/100),e[1]!=r[1]&&e[1]?t.traditionalRevPercent=100-e[1]:e[2]!=r[2]&&e[2]&&(t.digitalRevPercent=100-e[2]),t.totalRevPercent=e[1]+e[2],null===e[0]||void 0===e[0]||null===e[1]||void 0===e[1]||0==e[1]||null===e[3]||void 0===e[3]||0==e[3]?t.digitalOrders=0:t.digitalOrders=t.digitalRev/e[3],null===e[0]||void 0===e[0]||null===e[2]||void 0===e[2]||null===e[4]||void 0===e[4]?t.traditionalOrders=0:t.traditionalOrders=t.traditionalRev/e[4]}),e.showModal=function(){if(ga("send","event","ROI Calculator Progress","Clicked See Your Industry ROI","Step 1"),jQuery("form.left").addClass("ng-submitted"),void 0!==t.industry&&null!==t.industry||jQuery(".tile-radio + label").addClass("ng-invalid"),void 0===t.industry||null===t.industry||jQuery("form.left .ng-invalid").length>0){var r=jQuery("form.left .ng-invalid").offset().top-180;return jQuery("html, body").animate({scrollTop:r},"slow"),void jQuery(".warning").html("We can't calculate your ROI with missing data. Please fill out all fields.").css("opacity","1")}if(jQuery(".warning").css("opacity","0"),100!=t.totalRevPercent)return jQuery("#digitalRevPercent, #traditionalRevPercent").addClass("my-invalid"),void jQuery(".warning").html("Your revenue distribution does not add up to 100%.").css("opacity","1");jQuery("#digitalRevPercent, #traditionalRevPercent").removeClass("my-invalid"),jQuery(".warning").css("opacity","0"),jQuery("html, body").addClass("clicked"),jQuery("#modal").css({display:"flex"}),e.showResults.call()},e.showResults=function(){jQuery("form.modal-form").addClass("ng-submitted"),jQuery("#modal .close").fadeOut(),jQuery("html, body").removeClass("clicked"),jQuery("form.modal-form").animate({opacity:0},function(){jQuery(".loading").fadeIn(function(){setInterval(periods,800),e.updateTotals(),e.$apply(),ga("send","event","ROI Calculator Progress","Successful Form Completion","Step 1"),t.id=(new Date).getUTCMilliseconds(),getCookie("calcComplete")&&(t.id=getCookie("calcComplete")),e.$apply();var r=new Date,i=r.getTime()+2592e6;r.setTime(i),document.cookie="calcComplete="+t.id+"; expires="+r.toGMTString()+"; path=/;",document.cookie="calcEmail="+t.email+"; expires="+r.toGMTString()+"; path=/;",document.cookie="calcIndustry="+t.industry+"; expires="+r.toGMTString()+"; path=/;",document.cookie="calcCommerce="+t.commerce+"; expires="+r.toGMTString()+"; path=/;",document.cookie="calcTotalRev="+t.totalRev+"; expires="+r.toGMTString()+"; path=/;";for(var a=Math.floor(t.traditionalRevPercent/2),o=Math.floor(t.traditionalRevPercent/4),s=Math.floor(t.traditionalRevPercent/4);t.digitalRevPercent+a+o+s<100;)a++;document.cookie="calcDigitalRevPercent="+t.digitalRevPercent+"; expires="+r.toGMTString()+"; path=/;",document.cookie="calcDirectRevPercent="+a+"; expires="+r.toGMTString()+"; path=/;",document.cookie="calcInsideRevPercent="+o+"; expires="+r.toGMTString()+"; path=/;",document.cookie="calcPartnerRevPercent="+s+"; expires="+r.toGMTString()+"; path=/;",document.cookie="calcDigitalAOV="+t.digitalAOV+"; expires="+r.toGMTString()+"; path=/;",document.cookie="calcTraditionalAOV="+t.traditionalAOV+"; expires="+r.toGMTString()+"; path=/;",jQuery("#modal, #intro").fadeOut().promise().done(function(){jQuery("html, body").animate({scrollTop:0},"slow").promise().done(function(){jQuery("#results-page").fadeIn(function(){e.drawGraph()})})})})})},e.closeModal=function(){jQuery("#modal").fadeOut(),jQuery("html, body").removeClass("clicked")},e.updateTotals=function(){var e=t.totalRev,r=t.digitalRevPercent,i=t.traditionalRevPercent/2,a=t.traditionalRevPercent/4,o=t.traditionalRevPercent/4,s=t.digitalAOV,d=t.traditionalAOV,n=t.traditionalAOV,l=t.traditionalAOV,c=t.digitalErrorP/100,g=t.directErrorP/100,P=t.insideErrorP/100,C=t.partnerErrorP/100,m=t.digitalTeamSizeP,u=t.directTeamSizeP,S=t.insideTeamSizeP,v=t.digitalSalaryP,p=t.directSalaryP,y=t.insideSalaryP,T=t.digitalIncreaseP/100,O=t.businessBumpP/100,R=t.crossSellP/100,E=t.newProductP/100;t.digitalAOVIncrease=O+R+E,t.digitalRev=t.totalRev*(r/100),t.directRev=t.totalRev*(i/100),t.insideRev=t.totalRev*(a/100),t.partnerRev=t.totalRev*(o/100),t.digitalOrders=isFinite(t.digitalRev/s)?t.digitalRev/s:0,t.directOrders=isFinite(t.directRev/d)?t.directRev/d:0,t.insideOrders=isFinite(t.insideRev/n)?t.insideRev/n:0,t.partnerOrders=isFinite(t.partnerRev/l)?t.partnerRev/l:0,t.digitalNumOrderErrors=t.digitalOrders*c,t.directNumOrderErrors=t.directOrders*g,t.insideNumOrderErrors=t.insideOrders*P,t.partnerNumOrderErrors=t.partnerOrders*C,t.digitalTeamCost=m*v,t.directTeamCost=u*p,t.insideTeamCost=S*y,t.digitalTotalTeamCost=t.digitalTeamCost+t.digitalSystemsCost,t.directTotalTeamCost=t.directTeamCost+t.directSystemsCost,t.insideTotalTeamCost=t.insideTeamCost+t.insideSystemsCost,t.totalSystemsCost=t.digitalSystemsCost+t.directSystemsCost+t.insideSystemsCost,t.totalTeamCost=t.digitalTeamCost+t.directTeamCost+t.insideTeamCost,t.digitalCostPerMinute=t.digitalTotalTeamCost/525600,t.directCostPerMinute=t.directTotalTeamCost/124800,t.insideCostPerMinute=t.insideTotalTeamCost/124800,t.digitalCostPerError=t.digitalNumOrderErrors*(20*t.digitalCostPerMinute)/t.digitalNumOrderErrors,t.directCostPerError=t.directNumOrderErrors*(60*t.directCostPerMinute)/t.directNumOrderErrors,t.insideCostPerError=t.insideNumOrderErrors*(60*t.insideCostPerMinute)/t.insideNumOrderErrors,t.partnerCostPerError=t.partnerNumOrderErrors*(60*t.insideCostPerMinute)/t.partnerNumOrderErrors,t.digitalErrorCost=isFinite(t.digitalNumOrderErrors*t.digitalCostPerError)?t.digitalNumOrderErrors*t.digitalCostPerError:0,t.directErrorCost=isFinite(t.directNumOrderErrors*t.directCostPerError)?t.directNumOrderErrors*t.directCostPerError:0,t.insideErrorCost=isFinite(t.insideNumOrderErrors*t.insideCostPerError)?t.insideNumOrderErrors*t.insideCostPerError:0,t.partnerErrorCost=isFinite(t.partnerNumOrderErrors*t.partnerCostPerError)?t.partnerNumOrderErrors*t.partnerCostPerError:0,t.totalErrorCost=t.digitalErrorCost+t.directErrorCost+t.insideErrorCost+t.partnerErrorCost,t.digitalSystemPersonelCost=t.digitalTotalTeamCost,t.directSystemPersonelCost=t.directSystemsCost,t.insideSystemPersonelCost=t.insideSystemsCost,t.digitalCostPerOrder=t.digitalOrders>0?t.digitalSystemPersonelCost/t.digitalOrders:0,t.directCostPerOrder=60*t.directCostPerMinute,t.insideCostPerOrder=30*t.insideCostPerMinute,t.digitalCostToServe=t.digitalOrders*t.digitalCostPerOrder+t.digitalSystemPersonelCost,t.directCostToServe=t.directOrders*t.directCostPerOrder+t.directSystemPersonelCost,t.insideCostToServe=t.insideOrders*t.insideCostPerOrder+t.insideSystemPersonelCost,t.partnerCostToServe=t.partnerContribution*t.partnerRev,t.totalCostToServe=t.digitalCostToServe+t.directCostToServe+t.insideCostToServe+t.partnerCostToServe,t.digitalTotalCost=isFinite(t.digitalCostToServe+t.digitalErrorCost)?t.digitalCostToServe+t.digitalErrorCost:0,t.directTotalCost=isFinite(t.directCostToServe+t.directErrorCost)?t.directCostToServe+t.directErrorCost:0,t.insideTotalCost=isFinite(t.insideCostToServe+t.insideErrorCost)?t.insideCostToServe+t.insideErrorCost:0,t.partnerTotalCost=isFinite(t.partnerCostToServe+t.partnerErrorCost)?t.partnerCostToServe+t.partnerErrorCost:0,t.totalCost=t.digitalTotalCost+t.directTotalCost+t.insideTotalCost+t.partnerTotalCost,t.digitalMargin=t.digitalRev-t.digitalTotalCost,t.directMargin=t.directRev-t.directTotalCost,t.insideMargin=t.insideRev-t.insideTotalCost,t.partnerMargin=t.partnerRev-t.partnerTotalCost,t.totalMargin=e-t.totalCost,t.digitalMarginPercent=t.digitalMargin/t.digitalRev,t.directMarginPercent=t.directMargin/t.directRev,t.insideMarginPercent=t.insideMargin/t.insideRev,t.partnerMarginPercent=t.partnerMargin/t.partnerRev,t.totalMarginPercent=t.totalMargin/e,t.directOrdersShift=t.directOrders*t.directShift,t.insideOrdersShift=t.insideOrders*t.insideShift,t.partnerOrdersShift=t.partnerOrders*t.partnerShift,t.digitalOrders2=t.digitalOrders*(1+T)+(t.directOrdersShift+t.insideOrdersShift+t.partnerOrdersShift),t.directOrders2=t.directOrders-t.directOrdersShift,t.insideOrders2=t.insideOrders-t.insideOrdersShift,t.partnerOrders2=t.partnerOrders-t.partnerOrdersShift,t.directOrdersPercent=t.directOrdersShift/t.digitalOrders2,t.insideOrdersPercent=t.insideOrdersShift/t.digitalOrders2,t.partnerOrdersPercent=t.partnerOrdersShift/t.digitalOrders2,t.digitalOrdersShift=t.digitalOrders2-(t.directOrdersShift+t.insideOrdersShift+t.partnerOrdersShift),t.digitalOrdersPercent=1-(t.directOrdersPercent+t.insideOrdersPercent+t.partnerOrdersPercent),t.directAOV2=d,t.insideAOV2=n,t.partnerAOV2=l,t.digitalAOV2=(t.directOrdersPercent*t.directAOV2+t.insideOrdersPercent*t.insideAOV2+t.partnerOrdersPercent*t.partnerAOV2+t.digitalOrdersPercent*s)*(1+t.digitalAOVIncrease),t.digitalRev2=t.digitalOrders2*t.digitalAOV2,t.directRev2=t.directOrders2*t.directAOV2,t.insideRev2=t.insideOrders2*t.insideAOV2,t.partnerRev2=t.partnerOrders2*t.partnerAOV2,t.totalRev2=t.digitalRev2+t.directRev2+t.insideRev2+t.partnerRev2,t.digitalRevPercent2=t.digitalRev2/t.totalRev2,t.directRevPercent2=t.directRev2/t.totalRev2,t.insideRevPercent2=t.insideRev2/t.totalRev2,t.partnerRevPercent2=t.partnerRev2/t.totalRev2,t.digitalError2=0,t.directError2=t.directShift>0?g/2:g,t.insideError2=t.insideShift>0?P/2:P,t.partnerError2=t.partnerShift>0?C/2:C,t.digitalNumOrderErrors2=0,t.directNumOrderErrors2=t.directOrders2*t.directError2,t.insideNumOrderErrors2=t.insideOrders2*t.insideError2,t.partnerNumOrderErrors2=t.partnerOrders2*t.partnerError2,t.digitalTeamCost2=3*v,t.directTeamCost2=t.directTeamCost2,t.insideTeamCost2=t.insideTeamCost2,t.digitalTotalTeamCost2=t.digitalTeamCost2+t.digitalSystemsCost2,t.directTotalTeamCost2=t.directTotalTeamCost,t.insideTotalTeamCost2=t.insideTotalTeamCost,t.totalSystemsCost2=t.digitalSystemsCost2+t.directSystemsCost+t.insideSystemsCost,t.totalTeamCost2=t.digitalTeamCost2+t.directTeamCost+t.insideTeamCost,t.digitalCostPerMinute2=t.digitalTotalTeamCost2/525600,t.directCostPerMinute2=t.directCostPerMinute,t.insideCostPerMinute2=t.insideCostPerMinute,t.digitalCostPerError2=0,t.directCostPerError2=t.directNumOrderErrors2*(60*t.directCostPerMinute2)/t.directNumOrderErrors2,t.insideCostPerError2=t.insideNumOrderErrors2*(60*t.insideCostPerMinute2)/t.insideNumOrderErrors2,t.partnerCostPerError2=t.partnerNumOrderErrors2*(60*t.insideCostPerMinute2)/t.partnerNumOrderErrors2,t.digitalErrorCost2=0,t.directErrorCost2=isFinite(t.directNumOrderErrors2*t.directCostPerError2)?t.directNumOrderErrors2*t.directCostPerError2:0,t.insideErrorCost2=isFinite(t.insideNumOrderErrors2*t.insideCostPerError2)?t.insideNumOrderErrors2*t.insideCostPerError2:0,t.partnerErrorCost2=isFinite(t.partnerNumOrderErrors2*t.partnerCostPerError2)?t.partnerNumOrderErrors2*t.partnerCostPerError2:0,t.totalErrorCost2=t.digitalErrorCost2+t.directErrorCost2+t.insideErrorCost2+t.partnerErrorCost2,t.digitalSystemPersonelCost2=t.digitalTotalTeamCost2,t.directSystemPersonelCost2=t.directSystemsCost,t.insideSystemPersonelCost2=t.insideSystemsCost,t.digitalCostPerOrder2=t.digitalSystemPersonelCost2/t.digitalOrders2,t.directCostPerOrder2=60*t.directCostPerMinute2,t.insideCostPerOrder2=30*t.insideCostPerMinute2,t.digitalCostToServe2=t.digitalOrders2*t.digitalCostPerOrder2+t.digitalSystemPersonelCost2,t.directCostToServe2=t.directOrders2*t.directCostPerOrder2+t.directSystemPersonelCost2,t.insideCostToServe2=t.insideOrders2*t.insideCostPerOrder2+t.insideSystemPersonelCost2,t.partnerCostToServe2=t.partnerContribution*t.partnerRev2,t.totalCostToServe2=t.digitalCostToServe2+t.directCostToServe2+t.insideCostToServe2+t.partnerCostToServe2,t.digitalTotalCost2=isFinite(t.digitalCostToServe2+t.digitalErrorCost2)?t.digitalCostToServe2+t.digitalErrorCost2:0,t.directTotalCost2=isFinite(t.directCostToServe2+t.directErrorCost2)?t.directCostToServe2+t.directErrorCost2:0,t.insideTotalCost2=isFinite(t.insideCostToServe2+t.insideErrorCost2)?t.insideCostToServe2+t.insideErrorCost2:0,t.partnerTotalCost2=isFinite(t.partnerCostToServe2+t.partnerErrorCost2)?t.partnerCostToServe2+t.partnerErrorCost2:0,t.totalCost2=t.digitalTotalCost2+t.directTotalCost2+t.insideTotalCost2+t.partnerTotalCost2,t.digitalMargin2=t.digitalRev2-t.digitalTotalCost2,t.directMargin2=t.directRev2-t.directTotalCost2,t.insideMargin2=t.insideRev2-t.insideTotalCost2,t.partnerMargin2=t.partnerRev2-t.partnerTotalCost2,t.totalMargin2=t.totalRev2-t.totalCost2,t.digitalMarginPercent2=t.digitalMargin2/t.digitalRev2,t.directMarginPercent2=t.directMargin2/t.directRev2,t.insideMarginPercent2=t.insideMargin2/t.insideRev2,t.partnerMarginPercent2=t.partnerMargin2/t.partnerRev2,t.totalMarginPercent2=t.totalMargin2/t.totalRev2,t.growthRate=(t.totalRev2-e)/e,t.marginImpact=(t.totalMargin2-t.totalMargin)/t.totalMargin,t.marginMinusDigital=0==r?t.digitalRev2-t.digitalRev:s*(1+T)*(1+t.digitalAOVIncrease)*t.digitalOrders-t.digitalTotalCost2,t.totalRevX=e,t.totalRevY1=t.totalRevX*(1+t.growthRate),t.totalRevY2=t.totalRevY1*(1+t.growthRate),t.totalRevY3=t.totalRevY2*(1+t.growthRate),t.totalMarginY1=t.totalMargin*(1+t.marginImpact),t.totalMarginY2=t.totalMarginY1*(1+t.marginImpact),t.totalMarginY3=t.totalMarginY2*(1+t.marginImpact),t.totalMarginY4=t.totalMarginY3*(1+t.marginImpact),t.totalRevIncrease=t.totalRev2-e,t.totalCostSavings=t.totalCost-t.totalCost2,t.totalMarginIncrease=t.totalMargin2-t.totalMargin,t.roi=(t.marginMinusDigital-t.digitalSystemPersonelCost2-t.digitalMargin)/t.digitalSystemsCost2*100},e.drawGraph=function(){var i=google.visualization.arrayToDataTable([["Channel","Before",{role:"style"},"After",{role:"style"}],["Digital Gross Margins",Math.round(t.digitalMargin),"color: #cfe6f7",Math.round(t.digitalMargin2),"color: #8cc6ec"],["Traditional Gross Margins",Math.round(t.directMargin+t.insideMargin+t.partnerMargin),"color: #e1f1f1",Math.round(t.directMargin2+t.insideMargin2+t.partnerMargin2),"color: #48bab4"]]),a={vAxis:{format:"$#,###",viewWindow:{min:0}},legend:{position:"none"},colors:["#cfe6f7","#8cc6ec","#e1f1f1","#4bb9b4"]},o=new google.visualization.ColumnChart(document.getElementById("quickChart")),s=new google.visualization.ColumnChart(document.getElementById("quickChart2"));google.visualization.events.addListener(s,"ready",function(){t.quickGraph=s.getImageURI(),jQuery.ajax({url:ajaxVar.ajax_url,method:"post",data:{action:"generate_report",id:t.id,email:t.email,roi:r("number")(t.roi,0)+"%",totalRev:r("currency")(t.totalRevX,"$",0),totalRev2:r("currency")(t.totalRev2,"$",0),totalRevIncrease:r("currency")(t.totalRevIncrease,"$",0),totalMargin:r("currency")(t.totalMargin,"$",0),totalMargin2:r("currency")(t.totalMargin2,"$",0),totalMarginIncrease:r("currency")(t.totalMarginIncrease,"$",0),digitalRevPercent:r("number")(t.digitalRevPercent,1)+"%",digitalRevPercent2:r("number")(100*t.digitalRevPercent2,1)+"%",quickGraph:t.quickGraph},success:function(r){0!=r&&(t.url=r,jQuery(".download").removeClass("disabled"),e.$apply())},error:function(e){console.log(e)}})}),o.draw(i,a),s.draw(i,a)},google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){e.drawGraph()})}]),app.directive("commas",function(){return{restrict:"C",link:function(e,r,t){(e.data[t.ngModel.slice(5,-1)]||0==e.data[t.ngModel.slice(5,-1)])&&(e.data[t.ngModel.slice(5)]=commafy(e.data[t.ngModel.slice(5,-1)])),r.on("input",function(){if(""===r[0].value)return e.data[t.ngModel.slice(5,-1)]=void 0,void e.$apply();var i=parseInt(uncommafy(r[0].value));i>t.max?r[0].value=commafy(t.max):i<t.min?r[0].value=commafy(t.min):r[0].value=commafy(i),e.data[t.ngModel.slice(5,-1)]=i,e.$apply()})}}}),jQuery(".tooltip section[target]").each(function(){jQuery(this).position({my:"top",at:"top",of:jQuery(this).attr("target"),collision:"none"})}),jQuery(".tile-radio").on("change",function(){jQuery(".tile-radio + label").removeClass("ng-invalid")}),jQuery("input[type=number]").on("input keypress",function(e){if("-"==e.key||"."==e.key||"+"==e.key)return!1;jQuery(this).val()>parseInt(jQuery(this).attr("max"))?jQuery(this).val(jQuery(this).attr("max")):jQuery(this).val()<parseInt(jQuery(this).attr("min"))&&jQuery(this).val(jQuery(this).attr("min"))}),jQuery(".download").on("click",function(){ga("send","event","ROI Calculator Progress","Clicked Download Industry ROI Report","Step 2")}),jQuery(".customize").on("click",function(){ga("send","event","ROI Calculator Progress","Clicked Customize My ROI","Step 2")});